version: v2

modules:
  - path: bot

  - path: cases
    name: buf.build/webitel/cases

  - path: cc
    name: buf.build/webitel/cc

  - path: chat
    name: buf.build/webitel/chat

  - path: engine
    name: buf.build/webitel/engine

  - path: fs
    name: buf.build/webitel/fs

  - path: fts
    name: buf.build/webitel/fts

  - path: general
    name: buf.build/webitel/general

  - path: logger
    name: buf.build/webitel/logger

  - path: storage
    name: buf.build/webitel/storage

  - path: webitel-go
    name: buf.build/webitel/webitel-go

  - path: wfm
    name: buf.build/webitel/wfm

  - path: workflow
    name: buf.build/webitel/workflow

deps:
  - buf.build/googleapis/googleapis # Well-known types by Google
  - buf.build/grpc-ecosystem/grpc-gateway # Annotations to generate OpenAPIv2 definitions
  - buf.build/bufbuild/protovalidate # Validate Protobuf messages at runtime
  - buf.build/webitel/protoc-gen-go-webitel # Objclass and access mode constants for Webitel auth

# A set of rules for style, syntax, and best practices.
# More options are available on: https://buf.build/docs/configuration/v2/buf-yaml/#lint
lint:
  service_suffix: Service
  enum_zero_value_suffix: _UNSPECIFIED
  rpc_allow_same_request_response: false
  rpc_allow_google_protobuf_empty_requests: false
  rpc_allow_google_protobuf_empty_responses: true

  # Common rules: https://buf.build/docs/lint/rules
  use:
    # - MINIMAL - consider to be fundamental rules for modern Protobuf development, enable it later
    - ENUM_PASCAL_CASE
    - ENUM_VALUE_UPPER_SNAKE_CASE
    - FIELD_LOWER_SNAKE_CASE
    - MESSAGE_PASCAL_CASE
    - ONEOF_LOWER_SNAKE_CASE
    - PACKAGE_LOWER_SNAKE_CASE
    - RPC_PASCAL_CASE
    - SERVICE_PASCAL_CASE
    - PACKAGE_SAME_GO_PACKAGE
    - ENUM_FIRST_VALUE_ZERO
    - ENUM_NO_ALLOW_ALIAS
    - IMPORT_NO_PUBLIC
    - ENUM_VALUE_PREFIX
    - ENUM_ZERO_VALUE_SUFFIX
    - FILE_LOWER_SNAKE_CASE
    - RPC_REQUEST_RESPONSE_UNIQUE
    - RPC_REQUEST_STANDARD_NAME
    - RPC_RESPONSE_STANDARD_NAME
    - SERVICE_SUFFIX

  ignore:
    - google/api/annotations.proto
    - protoc-gen-openapiv2/options/annotations.proto

# Breaking change detection offering a set of rules and thoughtful categories.
# See: https://buf.build/docs/breaking/rules
breaking:
  use:
    - FILE



