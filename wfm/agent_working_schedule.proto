syntax = "proto3";

package wfm;

import "buf/validate/validate.proto";
import "google/api/annotations.proto";
import "proto/webitel/option.proto";
import "lookup.proto";
import "filter.proto";
import "agent_absence.proto";

option go_package = "github.com/webitel/protos/wfm;wfm";

service AgentWorkingScheduleService {
  option (option.objclass) = "working_schedules";
  rpc SearchAgentsWorkingSchedule(SearchAgentsWorkingScheduleRequest) returns (SearchAgentsWorkingScheduleResponse) {
    option (option.access) = ACTION_READ;
    option (google.api.http) = {get: "/wfm/agents/working_schedules/{working_schedule_id}"};
  }
}

message SearchAgentsWorkingScheduleRequest {
  int64 working_schedule_id = 1;
  FilterBetween date = 2;
}

message SearchAgentsWorkingScheduleResponse {
  int64 total = 1;
  repeated AgentWorkingSchedule items = 2;
}

enum AgentWorkingScheduleType {
  AGENT_WORKING_SCHEDULE_TYPE_UNSPECIFIED = 0;
  AGENT_WORKING_SCHEDULE_TYPE_LOCKED = 1;
  AGENT_WORKING_SCHEDULE_TYPE_SHIFT = 3;
  AGENT_WORKING_SCHEDULE_TYPE_PAUSE = 4;
}

message AgentWorkingSchedule {
  message WorkingSchedule {
    int64 date = 1;
    string holiday = 2;
    AgentAbsenceType absence = 3;
    AgentWorkingScheduleType type = 4;
    int64 start = 5;
    int64 end = 6;
  }

  LookupEntity agent = 1;
  repeated WorkingSchedule schedule = 2;
}