syntax = "proto3";

package webitel.im.internal.admin.v1;

option go_package = "github.com/webitel/messaging/proto/gen/webitel/messaging/admin/v1;adpb";

// PUSH Service Client configuration
message PUSHServiceClient {

  // Webitel PUSH service client
  PushWebServiceClient web = 1;

  // Android [F]irebase [C]loud [M]essaging service client
  PushFCMServiceClient fcm = 2;

  // iOS [A]pple [P]ush [N]otification service client
  PushAPNServiceClient apn = 3;

}

// Webitel PUSH Service Client configuration
message PushWebServiceClient {

  // Proxy URL to [POST] a notification message [TO] specified target.
  string proxy = 1;

  // A secret token to be sent in a header “X-Webitel-PUSH-Token” in every notification request.
  // The header is useful to ensure that the request comes from a Webitel PUSH service set by you.
  bytes token = 2;
}

// Android [F]irebase [C]loud [M]essaging Service Client configuration.
message PushFCMServiceClient {

  // Proxy URL to [POST] a notification message [TO] specified target.
  // https://fcm.googleapis.com/v1/{parent=projects/*}/messages:send
  string proxy = 1;

  // Authenticate FCMs API calls with the given service account JSON credentials.
  // https://firebase.google.com/docs/cloud-messaging/auth-server#authorize-http-v1-send-requests
  bytes account = 2;

}

// iOS [A]pple [P]ush [N]otification Service Client configuration.
message PushAPNServiceClient {

  // Client proxy URL.
  // - https://api.push.apple.com               ; Apple Push Services ; Default
  // - https://api.sandbox.push.apple.com       ; Apple Sandbox Push Services
  // - http://host[:port][/path/to/handle/apns] ; Custom service
  string proxy = 1;

  // OPTIONAL. Client transport protocol.
  // - h2 ; Default
  // - http/1.1
  string proto = 2;

  // The topic for the notification.
  // In general, the topic is your app’s bundle ID/app ID.
  // It can have a suffix based on the type of push notification.
  // If you’re using a certificate that supports PushKit VoIP or watchOS complication notifications,
  // you must include this header with the bundle ID of your app and if applicable, the proper suffix.
  // If you’re using token-based authentication with APNs, you must include this header with the correct bundle ID and suffix combination.
  //
  // To learn more about app ID, see Register an App ID.
  // https://developer.apple.com/help/account/manage-identifiers/register-an-app-id
  string topic = 3;

  // Token/key configuration
  message Token {
    // A 10-character string with the Key ID.
    // You must include this string in your JSON tokens.
    // https://developer.apple.com/documentation/usernotifications/establishing-a-token-based-connection-to-apns
    string key_id = 1;
    // An authentication token signing key, specified as a text file (with a .p8 file extension)
    // Raw (inline) file content. base64/PEM source data
    bytes auth_key = 2;
    // A 10-character string with the Team ID you use for developing your company’s apps.
    // The issuer key. Obtain this value from your developer account.
    // https://developer.apple.com/help/account/manage-your-team/locate-your-team-id/
    string team_id = 3;
  }

  // Token-based client authentication.
  Token token = 4;

  // TLS Client Certificate
  message TLSClient {
    // CERTIFICATE ; base64/PEM source data
    bytes cert = 1;
    // PRIVATE KEY ; base64/PEM source data
    bytes pkey = 2;
  }

  // Certificate-based client authentication.
  TLSClient tls = 5;
}